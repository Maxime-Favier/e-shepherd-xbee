
<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">

	<script src="https://maps.googleapis.com/maps/api/js?key=xxxxxxxxxxxxxxxxxxxxxxxxxxx&libraries=drawing"></script>
	
	<script>
	function postToURL(a,b,c){
		document.getElementById("zone").action= a;
		document.getElementById("array1").name  = b;
		document.getElementById("array1").value = c;
		document.getElementById("zone").submit();
	}
	</script>
	
	<script>
	//This variable gets all coordinates of polygone 
	var coordinates = [];
	//This variable saves polygon.
	var polygons = [];
	</script>

	<script>
	//save latitude and longitude to the polygons[] variable
	function save_coordinates_to_array(polygon)
	{
		polygons.push(polygon);
		var polygonBounds = polygon.getPath();
		for(var i = 0 ; i < polygonBounds.length ; i++)
		{
			coordinates.push(polygonBounds.getAt(i).lat(), polygonBounds.getAt(i).lng());
		}   
		console.log(coordinates);
		postToURL("areasubmit.php","array1",coordinates);
	}
	</script>
  </head>


<body>
<div style="width:1024px; height:768px;" id="map"></div>

<form id="zone" action="areasubmit.php" method="post">
  <input id="array1" type="" name="array1" value="a">
  <button type="button" id="envoyer" title="Envoyer">
</form>


</body>


<script>
function initialize()
{
    //Create map.
    var map = new google.maps.Map(document.getElementById('map'), {zoom: 17, mapTypeId: 'satellite', center: new google.maps.LatLng(46.0001577,6.7202198,424)});
    //Create drawing manager panel
    var drawingManager = new google.maps.drawing.DrawingManager({
	drawingControlOptions: {
      position: google.maps.ControlPosition.TOP_CENTER,
      drawingModes: ['polygon']
    }
	});
    drawingManager.setMap(map);
    // event creation of polygon completed 
    google.maps.event.addDomListener(drawingManager, 'polygoncomplete', function(polygon) {
        polygon.setEditable(false);
        save_coordinates_to_array(polygon);
    });
	
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>


</html>
